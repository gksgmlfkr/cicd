<?xml version="1.0" encoding="UTF-8"?>
 
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="dev.mvc.contents.ContentsDAOInter"> <!-- SB가 자동으로 구현하여 연동하는 interface -->
  <!-- 이재호 xml -->
  <!-- CREATE TABLE contents (
    contentsno      NUMBER(10)      NOT NULL    PRIMARY KEY,
    cateno          NUMBER(10)      NOT NULL,
    contents_admin  NUMBER(1)      DEFAULT 0   NOT NULL, 
    title           VARCHAR2(100)   NOT NULL,
    content         CLOB            NOT NULL,
    recom           NUMBER(7)       DEFAULT 0   NOT NULL,
    viewcnt         NUMBER(7)       DEFAULT 0   NOT NULL,
    commentcnt      NUMBER(7)       DEFAULT 0   NOT NULL,
    passwd          VARCHAR2(15)    NOT NULL,
    tag             VARCHAR2(100)   NOT NULL,
    rdate           DATE            NOT NULL,
    file1           VARCHAR2(100)  NULL,
    file1saved      VARCHAR2(100)  NULL,
    thumb1          VARCHAR2(100)  NULL,
    size1           NUMBER(10)      NULL,
    youtube         VARCHAR2(1000)  NULL,
    memberno        NUMBER(10)      NULL
    FOREIGN KEY (cateno) REFERENCES cate(cateno),
    FOREIGN KEY (memberno) REFERENCES member(memberno)
    ) -->
  <!-- 게시글 등록 -->
  <insert id = "create" parameterType="dev.mvc.contents.ContentsVO">
    INSERT INTO contents(contentsno, memberno, cateno, contents_admin, title, content, recom, viewcnt, 
                                  commentcnt, passwd, tag, rdate, file1, file1saved, thumb1, size1)
    VALUES (contents_seq.nextval, #{memberno}, #{cateno}, #{contents_admin}, #{title}, #{content}, #{recom}, #{viewcnt}, 
                #{commentcnt}, #{passwd}, #{tag}, sysdate, #{file1}, #{file1saved}, #{thumb1}, #{size1})
  </insert>
  
  <!-- 모든 등록된 게시글 목록 -->
  <select id = "list_all" resultType="dev.mvc.contents.ContentsVO">
    SELECT contentsno, memberno, cateno, contents_admin, title, content, recom, viewcnt, 
              commentcnt, passwd, tag, rdate, file1, file1saved, thumb1, size1, youtube
    FROM contents
    ORDER BY contentsno DESC    
  </select>
  
  <!-- 특정 카테고리 게시글 목록  -->
  <select id = "list_cate" resultType="dev.mvc.contents.ContentsVO" parameterType="int">
    SELECT contentsno, memberno, cateno, contents_admin, title, content, recom, viewcnt, 
              commentcnt, passwd, tag, rdate, file1, file1saved, thumb1, size1, youtube
    FROM contents
    WHERE cateno = #{cateno}
    ORDER BY contentsno DESC
  </select>
  
  <!-- 특정 카테고리 등록된 게시글 갯수 -->
  <select id = "list_cate_count" resultType="int" parameterType="int">
    SELECT COUNT(contentsno)
    FROM contents
    WHERE cateno= #{cateno}
  </select>
  
  <!-- 게시글 조회 -->
  <select id = "read" resultType="dev.mvc.contents.ContentsVO" parameterType="int">
    SELECT contentsno, memberno, cateno, contents_admin, title, content, recom, viewcnt, 
              commentcnt, passwd, tag, rdate, file1, file1saved, thumb1, size1, youtube
    FROM contents
    WHERE contentsno = #{contentsno}
  </select>
  
  <!-- -->
  
  
</mapper>