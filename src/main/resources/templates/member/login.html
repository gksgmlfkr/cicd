<!DOCTYPE html>

<html layout:decorate="~{layout}"> <!-- layout.html 상속-->

<div layout:fragment="content">
<style>
   .fieldset_basic {
    width: 95%; 
    margin: 0px auto; 
    border-top: none;
    border-right: none;
    border-bottom: none;
    border-left: none;

  }
      .text-center a {
        font-size: 13px; /* 원하는 글자 크기로 설정 */
        color: #007bff; /* 링크 색상 */
        text-decoration: none; /* 밑줄 제거 */
      }

      .text-center a:hover {
        color: #0056b3; /* 링크에 마우스를 올렸을 때 색상 */
        text-decoration: underline; /* 마우스를 올렸을 때 밑줄 추가 */
      }
      .login_btn {
      margin-top: 5px;
      justify-content: center;
      display: flex;
    }
    .form-wrapper {
      display: flex;
      
      justify-content: center; /* 수평 가운데 정렬 */
      align-items: center; /* 수직 가운데 정렬 */
      height: 65vh; /* 화면 전체 높이로 설정하여 세로 가운데 정렬 */
    }
    .form-group {
      position: relative;
      width: 100%;
      gap: 10px; /* 버튼 간격 추가 */
    }
    #btn_checkID {
      position: absolute;
      right: 0;
      top: 0;
      height: 100%;
      position:fixed;
    }
</style>
    <!-- 모달창 -->
    <div class="modal fade" id="warningModal" tabindex="-1" role="dialog" aria-labelledby="warningModalLabel" aria-hidden="true" data-backdrop="static" data-keyboard="false">
      <div class="modal-dialog modal-dialog-centered" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="warningModalLabel">경고</h5>
          </div>
          <div class="modal-body" id="modalBody">
            <!-- 경고 메시지가 여기에 표시됩니다 -->
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" id="modalConfirmButton">확인</button>
          </div>
        </div>
      </div>
    </div>

     <script>
      // 경고 모달창 표시 함수
      function showModal(message) {
        document.getElementById("modalBody").innerText = message; // 모달창 내용 설정
        $('#warningModal').modal('show'); // 모달창 표시
      }

      window.onload = () => {
        document.querySelector('#id').addEventListener('keypress', (event) => {
          if(event.key === 'Enter') {
            document.getElementById('btn_checkID').focus();
          }
        });

        document.querySelector('#passwd').addEventListener('keypress', (event) => {
          if(event.key === 'Enter') {
            document.getElementById('btn_send').focus();
          }
        });

        // 모달 확인 버튼에 이벤트 리스너 추가
        document.getElementById('modalConfirmButton').addEventListener('click', () => {
          document.getElementById('frm').submit();
        });
      }

      function send() { // 회원 가입 처리
        let id = document.getElementById('id');
        let id_msg = document.getElementById('id_msg');

        if (id.value.trim().length == 0) {
          id_msg.innerHTML= 'ID 입력은 필수 입니다. ID(이메일)는 3자이상 권장합니다.';
          id_msg.classList.add('span_warning');    // class 적용
          id.focus();
          return false;  // 로그인 진행 중지
        }

        let passwd = document.getElementById('passwd');
        let passwd_msg = document.getElementById('passwd_msg');

        if (passwd.value.trim().length == 0) {
          passwd_msg.innerHTML= '패스워드 입력은 필수 입니다. 패스워드는 8자이상 권장합니다.';
          passwd_msg.classList.add('span_warning');    // class 적용
          passwd.focus();
          return false;  // 로그인 진행 중지
        }
        
        // 로그인 성공 메시지 표시
        showModal("로그인 성공!");
      }
    </script>
  <div class="title_line">
<div class="form-group" style=" text-align:center;"> 로그인</div>
  </div>
  <fieldset class="fieldset_basic">
  <div class="form-wrapper" style="width: 100%;">
    <form name="frm" id="frm" th:object="${memberVO}" method="post" action="/member/login">
       
        <div class="form-group" style="margin-top: 5px; ">
          <label for="id" style=" font-size:20px;">아이디(이메일)*</label>
        <input style="margin-top: 5px; width:100%; font-size:x-large" type="text" name="id" id="id" th:value="${ck_id}" required="required" placeholder="id 입력"
               class="form-control fom-control-sm" >      
          
          <span id='id_msg'></span>
        </div>
        
        <div class="form-group" style="margin-top: 5px;">
          <label for="passwd" style=" font-size:20px;">패스워드*</label>
        <input style="margin-top: 5px; width:100%; font-size:x-large" type='password' name='passwd' id='passwd' th:value="${ck_passwd}" required="required" 
                  placeholder="패스워드" class="form-control form-control-sm">      
          <span id='passwd_msg'></span>
        </div>
        <div class="text-center">
          <a href='./create'>회원가입 |</a>
          <a href="/member/find_id_form" >아이디 찾기 |</a>
          <a href="/member/find_passwd_form">비밀번호 찾기</a>
        </div>
        <div class="login_btn">
          <button type="button" onclick="send();" class="registration-button" style=" font-size:small">로그인</button>

        </div>
      </form>
    </div>
  </fieldset>

    
</div>
</html>